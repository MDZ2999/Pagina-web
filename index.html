<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Habitaci√≥n</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/modals.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script><!--Script de la alerta -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/navbar.js"></script>
    <script src="js/check_session.js"></script>  <!-- Script para comprobar si hay una sesi√≥n iniciada -->
    <script src="js/logout_handling.js"></script>
    <script src="js/carrusel.js"></script><!--Este hace funcionar el carrusel-->
    <script src="js/edit_profile.js"></script>
    <script src="js/register_room.js"></script>
    <script src="js/load_profile_images.js"></script>
    <script src="js/load_owner_info.js"></script>
    <script src="js/roomNavigation.js"></script>
    <script src="js/update_user_info.js"></script>
    <script src="js/load_rooms.js"></script>
    <script src="js/load_all_rooms.js"></script>
    <script src="js/edit_room.js"></script>
</head>
<body>
    <!-- Encabezado -->
    <header>
        <div class="menu-container">
            <div class="menu-button">
                <button class="menu-toggle" aria-label="Toggle Menu">
                    <span class="menu-icons">
                        <span class="menu-icon"></span>
                        <span class="menu-icon"></span>
                        <span class="menu-icon"></span>
                    </span>
                </button>
            </div>
        </div>
        <div class="header-left">
            <div class="logo-container">
                <h1 class="logo-text">MI HABITACI√ìN</h1>
                <div class="header-logo">
                    <img src="img/logo.png" alt="Logo" class="logo">
                </div>
            </div> 
        </div>
        <div class="header-center">
            <nav class="navbar">
                <ul class="nav-links">
                    <li><a data-section="inicio" href="#inicio" id="inicio-link">Inicio</a></li>
                    <li><a data-section="perfil" href="#perfil">Perfil</a></li>
                    <li><a data-section="publicar" href="#publicar">Publicar</a></li>
                    <li><a data-section="acerca" href="#acerca">Acerca de</a></li>
                </ul>
            </nav>
        </div>
        <div class="header-right">
            <div class="search-container">
                <form id="searchForm">
                    <input type="text" placeholder="üîçÔ∏é     Search" id="searchInput" name="cuarto">
                </form>
            </div>
        </div>
        <div class="mobile-menu">
            <h2 class="menu-text">Men√∫</h2>
            <ul>
                <li><a href="#">Perfil</a></li>
                <li><a href="#">Configuraci√≥n</a></li>
                <li><a href="#">Pol√≠tica</a></li>
                <li><a href="#">Herramientas</a></li>
                <li class="menu-footer"><a id="logoutButton" href="">Cerrar sesi√≥n</a></li>
            </ul>
        </div>
    </header>

    <!-- Overlay -->
    <div class="menu-overlay"></div> 
    
    <div class="container-section">
            <!-- Distintos contenedores -->
        <section class="section" id="inicio">        <!-- Contenido de la secci√≥n Inicio -->
            <!-- Imagen de fondo y t√≠tulo -->
            <div class="headerI">  <!--Esto es del carrusel-->
                <button class="nav-button left-button">&lt;</button>
                <div class="headerI-content">
                    <h1>Habitaciones ‚ÄúEl Nogal‚Äù</h1>
                </div>
                <button class="nav-button right-button">&gt;</button>
            </div>
            
            <div class="sectionI-rooms">
                <h2 class="sectionI-title">Cuartos</h2>
            </div>
            
            <div class="rooms-gridI">
            </div>                       
            
        </section>
        <!-- Contenido de la secci√≥n Perfil -->
        <section class="section" id="perfil">
            <div class="headerP">
                <div class="headerP-content">
                    <img src="img/avatar.png" alt="Avatar" class="avatar">
                    <div class="text-content">
                        <h1>Habitaciones ‚ÄúEl Nogal‚Äù</h1>
                        <p>‚ÄúSi√©ntete como en tu casa‚Äù</p>
                    </div>
                </div>
            </div>
    
            <div class="owner-section">
                <div class="owner-info">
                    <h3>Datos del Propietario</h3>
                    <p>Nombre: <span id="nombreUsuario"></span></p>
                    <p>Tel√©fono: <span id="telefonoUsuario"></span></p>
                    <p>Correo Electr√≥nico: <span id="correoUsuario"></span></p>
                </div>                
                <div class="room-nav-buttons">
                    <button class="room-nav-button room-left-button" onclick="previousPage()" disabled>&lt;</button>
                    <div class="rooms-section" id="roomsSection">
                    </div>
                    <button class="room-nav-button room-right-button" onclick="nextPage()">&gt;</button>
                </div>
            </div>

        </section>

        <section class="section" id="publicar">        <!-- Contenido de la secci√≥n Publicar -->
            <div class="avatar-container">
                <div class="avatar">
                    <img src="img/perfil.png" alt="Avatar">
                </div>
                <div class="add-photo-container">
                    <div class="add-photo">
                        <h2>Agregar foto</h2>
                        <button id="openEditProfileModal">+</button>
                    </div>
                </div>
            </div>                        
            
            <div class="data-section-wrapper">
                <div class="data-section">
                    <div class="data-container" id="openEditModal">
                        <h2>Tus Datos</h2>
                        <p>Nombre: <span id="editnombreUsuario"></span></p>
                        <p>Tel√©fono: <span id="editTelefonoUsuario"></span></p>
                        <p>Direcci√≥n: <span id="editdireccionUsuario"></span></p>
                        <p>Correo Electr√≥nico: <span id="editcorreoUsuario"></span></p>
                    </div>
                    <div class="image-placeholder">
                        <div class="image-container" onclick="openEditRoomModal()">
                            <img src="img/placeholder.png" alt="Placeholder Image" class="image-content">
                        </div>
                    </div>                    
                    <!-- Bot√≥n para abrir el modal de Registrar Cuarto -->
                    <div class="extra-content">
                        <div id="openPublicarModal" class="add-photo-box">
                            <div class="add-photo-icon">+</div>
                        </div>
                    </div>
                </div>
                <button class="save-button">Guardar</button>
            </div>                        

        </section>

        <section class="section" id="acerca">        <!-- Contenido de la secci√≥n Acerca de -->
            <div class="background-thanks">
                <div class="thanks-container">
                    <h1>‚ÄúGracias por la preferencia‚Äù</h1>
                    <div class="info-container">
                        <div class="text-info">
                            <h2>Datos de la empresa</h2>
                            <p><strong>Nombre:</strong> MiHabitaci√≥n</p>
                            <p><strong>Descripci√≥n:</strong> Hospedaje de calidad y comodidad.</p>
                            <p><strong>Ubicaci√≥n:</strong> Situada en la zona de San Pablo, Oaxaca</p>
                            <p><strong>Acerca de nosotros:</strong> Somos un grupo de estudiantes que, con el prop√≥sito de ayudar a otros estudiantes, hemos desarrollado esta plataforma para ofrecer habitaciones de calidad y confianza. Nos comprometemos a proporcionar informaci√≥n veraz y actualizada para que encuentres la mejor opci√≥n de hospedaje durante tu estancia.</p>
                            <p><strong>T√©rminos y condiciones</strong></p>
                        </div>
                        <div class="image-info">
                            <img src="img/Equipo.png" alt="Equipo">
                        </div>
                    </div>
                    <div class="social-media-thanks">
                        <a href="#"><img src="img/instagram.png" alt="Instagram"></a>
                        <a href="#"><img src="img/whatsapp.png" alt="WhatsApp"></a>
                        <a href="#"><img src="img/facebook.png" alt="Facebook"></a>
                        <a href="#"><img src="img/gmail.png" alt="Email"></a>
                    </div>
                </div>
            </div>
            
        </section>

        <section class="section" id="detalles">        <!-- Contenido de la secci√≥n Acerca de -->
            <div class="background-thanks">
                <div class="thanks-container">
                    <h1>‚ÄúGracias por la preferencia‚Äù</h1>
                    <div class="info-container">
                        <div class="text-info">
                            <h2>Datos de la empresa</h2>
                            <p><strong>Nombre:</strong> MiHabitaci√≥n</p>
                            <p><strong>Descripci√≥n:</strong> Hospedaje de calidad y comodidad.</p>
                            <p><strong>Ubicaci√≥n:</strong> Situada en la zona de San Pablo, Oaxaca</p>
                            <p><strong>Acerca de nosotros:</strong> Somos un grupo de estudiantes que, con el prop√≥sito de ayudar a otros estudiantes, hemos desarrollado esta plataforma para ofrecer habitaciones de calidad y confianza. Nos comprometemos a proporcionar informaci√≥n veraz y actualizada para que encuentres la mejor opci√≥n de hospedaje durante tu estancia.</p>
                            <p><strong>T√©rminos y condiciones</strong></p>
                        </div>
                        <div class="image-info">
                            <img src="img/Equipo.png" alt="Equipo">
                        </div>
                    </div>
                    <div class="social-media-thanks">
                        <a href="#"><img src="img/instagram.png" alt="Instagram"></a>
                        <a href="#"><img src="img/whatsapp.png" alt="WhatsApp"></a>
                        <a href="#"><img src="img/facebook.png" alt="Facebook"></a>
                        <a href="#"><img src="img/gmail.png" alt="Email"></a>
                    </div>
                </div>
            </div>
            
        </section>

        <!--Fin de los contenedores-->
    </div>

    <!-- Pie de p√°gina -->
    <footer class="footer">
        <div class="footer-left">
            <h2>MI HABITACI√ìN</h2>
            <div class="footer-logo">
                <img src="img/logo.png" alt="Logo">
            </div>
        </div>
        <div class="footer-center">
        </div>
        <div class="footer-right">
            <img src="img/instagram.png" alt="instagram Logo">
            <img src="img/whatsapp.png" alt="whatsapp Logo">
            <img src="img/Facebook.png" alt="Facebook Logo">
            <img src="img/gmail.png" alt="Gmail Logo">
        </div>
    </footer>   

    <!-- Modal para editar avatar y banner del perfil -->
    <div id="editProfileModal" class="editProfileModal">
        <div class="editProfileModal-content">
            <span class="editProfileClose">&times;</span>
            <h2>Editar Perfil</h2>
            <form id="editProfileForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="avatar">Cambiar foto de perfil:</label>
                    <input type="file" id="avatar" name="avatar" accept="image/*">
                    <img id="avatarPreview" src="#" alt="Avatar Preview" style="display:none;">
                    <input type="hidden" id="avatarCropped" name="avatarCropped">
                </div>
                <div class="form-group">
                    <label for="banner">Cambiar banner:</label>
                    <input type="file" id="banner" name="banner" accept="image/*">
                    <img id="bannerPreview" src="#" alt="Banner Preview" style="display:none;">
                    <input type="hidden" id="bannerCropped" name="bannerCropped">
                </div>
                <div class="editProfileModal-buttons">
                    <button type="button" class="editProfileCancel-button">Cancelar</button>
                    <button type="submit" class="editProfileSave-button">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para editar datos de perfil -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeEditModal">&times;</span>
            <h2>Editar Datos</h2>
            <form id="editForm">
                <div class="form-group">
                    <label for="nombres">Nombre:</label>
                    <input type="text" placeholder="Nombres" id="nombres" name="nombres" title="Hasta 30 caracteres" maxlength="30">
                    <input type="text" placeholder="Apellido Paterno" id="apellidoP" name="apellidoP" title="Hasta 15 caracteres" maxlength="15">
                    <input type="text" placeholder="Apellido Materno" id="apellidoM" name="apellidoM" title="Hasta 15 caracteres" maxlength="15">
                </div>
                <div class="form-group">
                    <label for="telefono">Tel√©fono:</label>
                    <input type="number" placeholder="Telefono" id="telefono" name="telefono" title="Hasta 15 caracteres" maxlength="15">
                </div>
                <div class="modal-buttons">
                    <button type="button" id="cancelButton" class="Cancel-button">Cancelar</button>
                    <button type="submit" class="Save-button">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!--Modal para editar cuartos-->
    <div id="editRoomModal" class="editRoomModal">
        <div class="editRoomModal-content">
            <span class="editRoomClose">&times;</span>
            <h2>Editar Cuarto</h2>
            <div class="form-group">
                <label for="selectRoom">Escoge el cuarto a editar:</label>
                <select id="selectRoom" name="selectRoom">
                    <option value="" selected disabled>Selecciona un cuarto</option>
                    <!-- Opciones cargadas din√°micamente -->
                </select>
            </div>
            <form id="editRoomForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="tituloEdit">T√≠tulo:</label>
                    <input type="text" id="tituloEdit" name="titulo" title="Hasta 100 caracteres" maxlength="100" required>
                </div>
    
                <div class="form-group">
                    <label for="descripcionEdit">Descripci√≥n:</label>
                    <textarea id="descripcionEdit" name="descripcion" required></textarea>
                </div>
    
                <div class="form-group">
                    <label for="serviciosEdit">Servicios:</label>
                    <textarea id="serviciosEdit" name="servicios" required></textarea>
                </div>
    
                <div class="form-group">
                    <label for="precioEdit">Precio $:</label>
                    <input type="number" id="precioEdit" name="precio" step="0.01" required>
                </div>
    
                <div class="form-group">
                    <label for="disponibilidadEdit">Disponibilidad:</label>
                    <select id="disponibilidadEdit" name="disponibilidad" required>
                        <option value="1">Disponible</option>
                        <option value="0">No Disponible</option>
                    </select>
                </div>
    
                <div class="form-group">
                    <label for="direccionEdit">Direcci√≥n:</label>
                    <textarea id="direccionEdit" name="direccion" required></textarea>
                </div>
    
                <div class="form-group">
                    <label for="imagenEdit">Imagen:</label>
                    <input type="file" id="imagenEdit" name="imagen" accept="image/*">
                    <img id="imageEditPreview">
                </div>
                
                <div class="form-group">
                    <label for="imagenEdit2">Imagen 2:</label>
                    <input type="file" id="imagenEdit2" name="imagen2" accept="image/*">
                    <img id="imageEditPreview2">
                </div>
    
                <div class="form-group">
                    <label for="imagenEdit3">Imagen 3:</label>
                    <input type="file" id="imagenEdit3" name="imagen3" accept="image/*">
                    <img id="imageEditPreview3">
                </div>
    
                <div class="form-group">
                    <label for="imagenEdit4">Imagen 4:</label>
                    <input type="file" id="imagenEdit4" name="imagen4" accept="image/*">
                    <img id="imageEditPreview4">
                </div>
    
                <div class="editRoomModal-buttons">
                    <button type="button" class="editRoomCancel-button">Cancelar</button>
                    <button type="submit" class="editRoomSave-button">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- El Modal para Registrar Cuarto-->
    <div id="publicarModal" class="publicarModal">
        <!-- Contenido del Modal -->
        <div class="publicarModal-content">
            <span class="publicarClose">&times;</span>
            <h2>Registrar Cuarto</h2>
            <form id="registerRoomForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="titulo">T√≠tulo:</label>
                    <input type="text" id="titulo" name="titulo" title="Hasta 100 caracteres" maxlength="100" required>
                </div>

                <div class="form-group">
                    <label for="descripcion">Descripci√≥n:</label>
                    <textarea id="descripcion" name="descripcion" required></textarea>
                </div>

                <div class="form-group">
                    <label for="servicios">Servicios:</label>
                    <textarea id="servicios" name="servicios" required></textarea>
                </div>

                <div class="form-group">
                    <label for="precio">Precio $:</label>
                    <input type="number" id="precio" name="precio" step="0.01" required>
                </div>

                <div class="form-group">
                    <label for="disponibilidad">Disponibilidad:</label>
                    <select id="disponibilidad" name="disponibilidad" required>
                        <option value="1">Disponible</option>
                        <option value="0">No Disponible</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="direccion">Direcci√≥n:</label>
                    <textarea id="direccion" name="direccion" required></textarea>
                </div>

                <div class="form-group">
                    <label for="imagen">Imagen:</label>
                    <input type="file" id="imagen" name="imagen" accept="image/*" required>
                    <img id="imagePreview">
                </div>

                <div class="form-group">
                    <label for="imagen2">Imagen 2:</label>
                    <input type="file" id="imagen2" name="imagen2" accept="image/*">
                    <img id="imagePreview2">
                </div>
    
                <div class="form-group">
                    <label for="imagen3">Imagen 3:</label>
                    <input type="file" id="imagen3" name="imagen3" accept="image/*">
                    <img id="imagePreview3">
                </div>
    
                <div class="form-group">
                    <label for="imagen4">Imagen 4:</label>
                    <input type="file" id="imagen4" name="imagen4" accept="image/*">
                    <img id="imagePreview4">
                </div>
        
                <div class="publicarModal-buttons">
                    <button type="button" class="publicarCancel-button">Cancelar</button>
                    <button type="submit" class="publicarSave-button">Guardar</button>
                </div>
            </form>
        </div>
    </div>

        <!-- Modal para la imagen ampliada -->
    <div id="imageModal" class="imageModal">
        <span class="imageModalClose">&times;</span>
        <img class="imageModalContent" id="imageModalContent">
    </div>

    <!-- Modal para el recorte de imagen -->
    <div id="cropperModal" class="modal">
        <div class="modal-content">
            <span class="cropperClose">&times;</span>
            <div id="cropperContainer">
                <img id="imageToCrop" src="#" alt="Imagen a recortar">
            </div>
            <div class="cropperModal-buttons">
                <button type="button" class="cropCancel-button">Cancelar</button>
                <button type="button" class="cropSave-button">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Imagen Ampliada del Carrusel-->
    <div id="imageModalCarrusel" class="imageModalCarrusel">
        <div class="imageModalContentCarrusel">
            <span class="imageModalCarruselClose">&times;</span>
            <button class="carousel-btn prev-btn">&lt;</button>
            <img id="modalImage" class="modal-room-image">
            <button class="carousel-btn next-btn">&gt;</button>
            <div id="carouselDotsContainer" class="carousel-dots"></div>
        </div>
    </div>

    <script>
        const telefonoInput = document.getElementById('telefono');
        telefonoInput.addEventListener('input', function() {
            if (this.value.length > 15) {
                this.value = this.value.slice(0, 15);
            }
        });
    </script>
</body>
</html>